!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("react-teatrum",["react"],t):"object"==typeof exports?exports["react-teatrum"]=t(require("react")):e["react-teatrum"]=t(e.React)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Teatrum=t.Actor=t.Scene=t.Stage=t.Staff=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),c=n(i),p=r(!function(){var e=new Error('Cannot find module "create-react-class"');throw e.code="MODULE_NOT_FOUND",e}()),l=n(p),u="";try{u=r(!function(){var e=new Error('Cannot find module "../../../death-star-minify.conf"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){console.error("You need to create a configuration file for the library, please read the documentation at https://github.com/erickstryck/react-deathStar/blob/master/README.md"),u={minify:!1}}u=u.minify;var f="",h=function(){function e(){s(this,e),this.storage={},this.htmlDict=[]}return a(e,null,[{key:"getInstance",value:function(){return f||(f=new e)}},{key:"clearStorage",value:function(){e.getInstance().storage={}}},{key:"setItemStorage",value:function(t,r){e.getInstance().storage[t]=r}},{key:"getHtmlDict",value:function(){return e.getInstance().htmlDict}},{key:"setHtmlDict",value:function(t){e.getInstance().htmlDict.push(t)}},{key:"putStore",value:function(t,r,n){if(n){r.update=function(){r.setState({teatrumUpdater:!!r.teatrumUpdater})};for(var o={},s=Object.keys(r),a=0;a<s.length;a++){var i=s[a];"function"==typeof r[i]&&(o[i]=r[i])}o.state=r.state,e.getInstance().storage[t]=o}else e.getInstance().storage[t]=r;return r}},{key:"getStore",value:function(t){var r="";try{r=e.getInstance().storage[t]}catch(e){console.error("The key '"+t+"' does not exist")}return r}},{key:"deleteStore",value:function(t){delete e.getInstance().storage[t]}},{key:"getKeys",value:function(){return Object.keys(e.getInstance().storage)}}]),e}(),d=function(e){return(0,l.default)({getInitialState:function(){return{staff:S,key:e}},render:function(){var t=S.processElement(c.default.createElement("div",this.props),e,!1,this);if(this.props.path){var r=this.state.staff.getStore("state_path_"+this.props.owner).currentPath();this.props.path!=r&&(t="")}return t}})},g=function(e){if(!e.name||!e.path)return console.error({error:"You need to enter the props 'name' and 'path' for the component."}),null;var t=new(d("stage_"+e.name))(e);return h.putStore("class_"+e.name,t),h.putStore("path_"+e.path,e.name),h.getStore("class_"+e.name)},m=function(e){return e.name&&e.init?(e.browser&&"/"!=window.location.pathname&&(e=S.swapPropsAttr({props:e},{init:window.location.pathname}).props),new((0,l.default)({getInitialState:function(){return h.putStore("state_path_"+this.props.name,{push:this.push,back:this.back,forward:this.forward,reset:this.reset,currentPath:this.currentPath}),{storage:h,currentClass:"",path:[this.props.init],idx:0}},componentDidMount:function(){var e=h.getStore("class_"+h.getStore("path_"+this.state.path[this.state.idx]));if(e||(e=h.getStore("class_"+h.getStore("path_"+this.props.redirect)),this.state.path.splice(this.state.idx,1),this.state.path.push(this.props.redirect),this.props.browser&&window.history.pushState(null,"",this.props.redirect)),this.props.browser&&!this.props.ignorePersistence){var t=window.localStorage.getItem("teatrumProps_"+this.state.path[this.state.idx]);e.props=Object.assign({},e.props,JSON.parse(t)),h.setItemStorage("class_"+h.getStore("path_"+this.state.path[this.state.idx]),e)}this.setState({currentClass:e})},push:function(e,t){var r=this.state.idx;this.state.path.push(e);var n=h.getStore("class_"+h.getStore("path_"+e));n.props=Object.assign({},n.props,t),h.setItemStorage("class_"+h.getStore("path_"+e),n),this.props.browser&&(window.history.replaceState("","",e),window.localStorage.setItem("teatrumProps_"+e,JSON.stringify(t))),this.setState({idx:++r,currentClass:n})},back:function(e){var t=--this.state.idx;if(t>=0){var r=h.getStore("class_"+h.getStore("path_"+this.state.path[t]));r.props=Object.assign({},r.props,e),h.setItemStorage("class_"+h.getStore("path_"+this.state.path[t]),r),this.props.browser&&(window.history.replaceState("","",path),window.localStorage.setItem("teatrumProps_"+path,JSON.stringify(e))),this.setState({idx:t,currentClass:r})}},reset:function(e){var t=h.getStore("class_"+h.getStore("path_"+this.state.path[0]));t.props=Object.assign({},t.props,e),h.setItemStorage("class_"+h.getStore("path_"+this.state.path[0]),t),this.props.browser&&(window.history.replaceState("","",path),window.localStorage.setItem("teatrumProps_"+path,JSON.stringify(e))),this.setState({idx:0,currentClass:t})},currentPath:function(){return this.state.path[this.state.idx]},forward:function(e){var t=++this.state.idx;if(t<=this.state.path.length-1){var r=h.getStore("class_"+h.getStore("path_"+this.state.path[t]));r.props=Object.assign({},r.props,e),h.setItemStorage("class_"+h.getStore("path_"+this.state.path[t]),r),this.props.browser&&(window.history.replaceState("","",path),window.localStorage.setItem("teatrumProps_"+path,JSON.stringify(e))),this.setState({idx:t,currentClass:r})}h.getStore("class_"+h.getStore("path_"+this.props.init))},render:function(){return this.state.currentClass?this.state.currentClass.update?this.state.currentClass.render():this.state.currentClass:this.props.children}}))(e)):(console.error("You need to enter the props 'name' and 'init' for the component."),null)},v=function(e){return e.name?new(d("scene_"+e.name))(e):(console.error("You need to enter the props 'name' for the component."),null)},k=function(e){return e.name?new(d("actor_"+e.name))(e):(console.error("You need to enter the props 'name' for the component."),null)},S={builder:function(e,t,r){return r&&0===r.length&&(r=null),t=t.children?Object.assign({},t,{children:null}):t,t=Object.assign({},t,{key:this.getId()}),c.default.createElement(e||"div",t,r)},clearBus:function(){h.clearStorage()},injectReact:function(e){Store.getInstance(e)},setContext:function(e,t){h.putStore(e+"_context",t,!0)},getContext:function(e){return h.getStore(e+"_context")},putStore:function(e,t,r){return h.putStore(e,t,r)},getStore:function(e){return h.getStore(e)},deleteStore:function(e){h.deleteStore(e)},keys:function(){return h.getKeys()},destroy:function(e){var t=S.keys();if(e instanceof Array)for(var r=0;r<e.length;r++)for(y=0;y<t.length;y++){var n=e[r],o=t[y];o.split("-")[0]===n&&h.deleteStore(n)}else for(y=0;y<t.length;y++){var s=t[y];s.split("-")[0]===e&&h.deleteStore(s)}},minf:function(e){if(u){e.match(/(-\w[a-zA-Z]+)/g)&&e.match(/(-\w[a-zA-Z]+)/g).map(function(t){-1===h.getHtmlDict().indexOf(t.substring(1,e.length))&&(e=e.replace(t.substring(1,e.length),"t"))})}return e},container:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.props;return-1!==Object.keys(e).indexOf("key")&&e.key&&!t&&(r=Object.assign({},r,{key:e.key})),-1!==Object.keys(e).indexOf("ref")&&e.ref&&(r=Object.assign({},r,{ref:e.ref})),S.builder(e.type,r||null,-1!==Object.keys(e.props).indexOf("children")?S.processChildren(e.props.children,t):[])},processChildren:function(e,t){return e?e instanceof Array?e.length>0?e.map(function(e){if(e)return e.type?S.container(e,t):e}):null:e.type?S.container(e,t):e:null},processElement:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],o=S.setStore(t,e,r);return S.mapChildrens(o.props.children,t),n&&S.setContext(t,n),e},propagateUpdates:function(e){S.getContext(e.split("-")[0]).update()},mapChildrens:function(e,t){if(e)if(e instanceof Array)for(var r=0;r<e.length;r++){var n=e[r];n&&(++r,n.props&&S.mapChildrens(n.props.children,t+"-"+S.haveTypeName(n.type)+r),n.props&&S.putStore(t+"-"+S.haveTypeName(n.type)+r,n.key))}else e.props&&S.mapChildrens(e.props.children,t+"-"+S.haveTypeName(e.type)+"1"),e.props&&S.putStore(t+"-"+S.haveTypeName(e.type)+"1",e.key)},haveTypeName:function(e){return u&&"string"==typeof e&&-1===h.getHtmlDict().indexOf(e)&&h.setHtmlDict(e),e.displayName?e.displayName:e.name?e.name:e},getId:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"_"+e()+"_"+e()+"_"+e()+"_"+e()+e()+e()},setStore:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S.putStore(e,S.container(t,r))},getElement:function(e){if(e=S.minf(e),S.checkKey(e)){var t=S.getStore(e),r=t.props?t.key:t,n=e.split("-");if(S.checkKey(n[0])){var o=S.getStore(n[0]);return o.key===r?o:S.walkChildren(o.props.children,r)}}},setProps:function(e,t){if(!(e||t instanceof Object))return void console.log("metodo: setProps - Você precisa especificar uma key em string e um props no formato objeto!");if(S.checkKey(e)){var r=S.getElement(e);-1!==Object.keys(t).indexOf("ref")&&(r=Object.assign({},r,{ref:t.ref}),delete t.ref),r=S.swapPropsAttr(r,t),S.updateAllReferences(r)}},walkChildren:function(e,t){var r="";if(e)if(e instanceof Array){for(var n=0;n<e.length;n++)if(e[n]){if(e[n].key===t)return e[n];if(e[n].props&&(r=S.walkChildren(e[n].props.children,t)),r&&r.key===t)return r}}else{if(e.key===t)return e;if(e.props&&(r=S.walkChildren(e.props.children,t)),r&&r.key===t)return r}},copy:function(e,t){return S.checkKey(e)&&S.processElement(S.getElement(e),t,!0),S.getElement(t)},setAttribute:function(e,t){if(!e&&!t||!(t instanceof Object))return void console.log("metodo: setAttributes - Você precisa especificar uma key em string e um atributo no formato objeto!");if(S.checkKey(e))if(t.ref){var r=S.getElement(e),n=Object.assign({},r,t);S.updateAllReferences(n)}else if(S.checkProps(e)){var o=S.getElement(e),s=S.swapPropsAttr(o,t);S.updateAllReferences(s)}},modifyAttribute:function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var o=r[n];S.processModify(e,o,t[o])}},processModify:function(e,t,r){if(!e&&!t&&!r)return void console.log("metodo: modifyAttribute - Você precisa especificar a key, o nome do atributo e seu valor por parâmetro!");if(S.checkKey(e)&&S.checkProps(e)&&(S.checkAttribute(e,t)||"ref"===t)){var n=S.getElement(e);if("ref"===t){var o=Object.assign({},n,{ref:r});S.updateAllReferences(o)}else{var s={};s[t]=r;var a=S.swapPropsAttr(n,s);S.updateAllReferences(a)}}},removeAttribute:function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++){var n=t[r];S.processRemove(e,n)}else S.processRemove(e,t)},processRemove:function(e,t){if(!e&&!t)return void console.log("metodo: removeAttribute - Você precisa especificar uma key em string e o nome do atributo a ser removido!");if(S.checkKey(e)&&S.checkProps(e)){var r=S.getElement(e);if("ref"===t){var n=Object.assign({},r,{ref:null});S.updateAllReferences(n)}if(S.checkAttribute(e,t)){var o=Object.keys(r.props);o.splice(o.indexOf(t),1);for(var s={},a=0;a<o.length;a++){var i=o[a];s[i]=r.props[i]}var c=Object.assign({},r,{props:s});S.updateAllReferences(c)}}},setChildren:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e&&!t)return void console.log("metodo: setChildren - Você precisa especificar a key e um elemento a ser inserido!");if(S.checkKey(e)){var s=S.getElement(e);if(S.checkProps(e))if(s.props.children){var a="";if(t instanceof Array){a=s.props.children,a instanceof Array||(a=new Array(a));var i={};if(r){var c,p;r--,n?(c=a).splice.apply(c,[r,0].concat(o(t))):(p=a).splice.apply(p,[r,1].concat(o(t))),i=S.swapPropsAttr(s,{children:a})}else i=S.swapPropsAttr(s,{children:a.concat(t)});S.updateAllReferences(i)}else{a=s.props.children instanceof Array?s.props.children:new Array(s.props.children),r?(r--,n?a.splice(r,0,t):a[r]=t):a.push(t);var l=S.swapPropsAttr(s,{children:a});S.updateAllReferences(l)}}else{var u=S.swapPropsAttr(s,{children:t});S.updateAllReferences(u)}}},removeChildren:function(e,t){if(t instanceof Array&&-1!==t)for(var r=0;r<t.length;r++){var n=t[r];S.processRemoveChildren(e,n)}else-1===t?S.processResetChildren(e):S.processRemoveChildren(e,t)},processRemoveChildren:function(e,t){if(t--,!e&&t)return void console.log("metodo: removeChildren - Você precisa especificar a key onde será retirada a children e o índice que corresponde a children a ser removida!");if(S.checkKey(e)){var r=S.getElement(e);if(r.props.children instanceof Array){var n=r.props.children.filter(function(e,r){return t!==r}),o=S.swapPropsAttr(r,{children:n});S.updateAllReferences(o)}else{var s=S.swapPropsAttr(r,{children:null});S.updateAllReferences(s)}}else console.log("Chave não encontrada!")},processResetChildren:function(e){if(!e)return void console.log("metodo: removeChildren - Você precisa especificar a key onde será retirada os childrens !");if(S.checkKey(e)){var t=S.getElement(e),r=S.swapPropsAttr(t,{children:null});S.updateAllReferences(r)}else console.log("Chave não encontrada!")},updateAllReferences:function(e){for(var t=S.keys(),r=0;r<t.length;r++){var n=t[r],o=S.getStore(n);o.props&&o.key==e.key&&S.processElement(e,n)}},swapPropsAttr:function(e,t){var r=Object.assign({},e.props,t);return Object.assign({},e,{props:r})},checkKey:function(e){var t=-1!==S.keys().indexOf(e);return t||console.error('this key "'+e+'" was not found, see the available keys: '+S.keys()),t},checkProps:function(e){return!!S.checkKey(e)&&-1!==Object.keys(S.getElement(e)).indexOf("props")},checkAttribute:function(e,t){return!!S.checkKey(e)&&(!!S.checkProps(e)&&-1!==Object.keys(S.getElement(e).props).indexOf(t))}},b={getElement:function(e){return S.getElement(e)},copy:function(e,t){return e&&t?S.copy(e,t):void console.error("For cloning you must enter:an existing key and a new key")},keys:function(){return S.keys()},setAttribute:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S.setAttribute(e,t),r||S.propagateUpdates(e)},setProps:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S.setProps(e,t),r||S.propagateUpdates(e)},modifyAttribute:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S.modifyAttribute(e,t),r||S.propagateUpdates(e)},removeAttribute:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S.removeAttribute(e,t),r||S.propagateUpdates(e)},setChildren:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];S.setChildren(e,t,r,n),o||S.propagateUpdates(e)},removeChildren:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S.removeChildren(e,t),r||S.propagateUpdates(e)},checkAttribute:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S.checkAttribute(e,t)},stagePush:function(e,t,r){h.getStore("state_path_"+e).push(t,r)},stageBack:function(e,t){h.getStore("state_path_"+e).back(t)},stageForward:function(e,t){h.getStore("state_path_"+e).forward(t)},stageReset:function(e,t){h.getStore("state_path_"+e).reset(t)},destroy:function(e){S.destroy(e)}};t.Staff=b,t.Stage=g,t.Scene=v,t.Actor=k,t.Teatrum=m},function(t,r){t.exports=e}])});